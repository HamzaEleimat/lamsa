# ====================================================================
# Lamsa DEVELOPMENT Environment Template
# ====================================================================
# Quick setup for local development with sensible defaults
# Copy this to .env and update with your local values
#
# For quick setup run: node scripts/setup-env.js dev

# ====================================================================
# QUICK START CHECKLIST
# ====================================================================
# 1. Copy this file: cp .env.development.template .env
# 2. Get Supabase credentials from: https://app.supabase.com
# 3. Update SUPABASE_URL, SUPABASE_ANON_KEY, SUPABASE_SERVICE_KEY
# 4. For mobile testing: Update EXPO_PUBLIC_API_URL with your IP
# 5. Run: node scripts/validate-env.js

# ====================================================================
# CORE SETTINGS (Required)
# ====================================================================

NODE_ENV=development
PORT=3000
APP_NAME=Lamsa
APP_VERSION=1.0.0-dev
DEFAULT_LANGUAGE=ar
CURRENCY=JOD
TIMEZONE=Asia/Amman

# ====================================================================
# DATABASE (Get from Supabase Dashboard)
# ====================================================================

# Create a project at https://app.supabase.com
SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your_anon_key_here
SUPABASE_SERVICE_KEY=your_service_key_here

# Local Supabase (if using supabase CLI)
# SUPABASE_URL=http://localhost:54321
# DATABASE_URL=postgresql://postgres:postgres@localhost:54322/postgres

# ====================================================================
# AUTHENTICATION (Auto-generated secure defaults)
# ====================================================================

# These will be auto-generated when using setup script
JWT_SECRET=dev_jwt_secret_change_this_in_production_min_32_chars
JWT_EXPIRES_IN=15m
REFRESH_TOKEN_EXPIRES_IN=30d
SESSION_SECRET=dev_session_secret_change_this_in_production

# ====================================================================
# REDIS (Optional for development)
# ====================================================================

# If you have Redis installed locally
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=
CACHE_TTL=300

# To disable Redis and use in-memory cache, comment out REDIS_URL

# ====================================================================
# DEVELOPMENT FEATURES
# ====================================================================

# Logging
LOG_LEVEL=debug
ENABLE_MORGAN_LOGGING=true
ENABLE_DETAILED_LOGGING=true
DEBUG=lamsa:*

# API Documentation
ENABLE_SWAGGER=true

# Development Tools
ENABLE_DEBUG=true
ENABLE_PERFORMANCE_MONITORING=true
ENABLE_NETWORK_INSPECTOR=true

# Mock Services (for testing without external services)
ENABLE_MOCK_PAYMENTS=true
ENABLE_MOCK_SMS=true
ENABLE_TEST_ENDPOINTS=true

# ====================================================================
# EXTERNAL SERVICES (Optional for basic development)
# ====================================================================

# Tap Payment (Get test keys from https://www.tap.company/jo/)
TAP_SECRET_KEY=sk_test_XKokBfNWv6FIYuTMg5sLPjhJ
TAP_PUBLIC_KEY=pk_test_EtHFV4BuPQokJT6jiROls87Y

# Twilio (Get test credentials from https://www.twilio.com/)
# Test credentials that always succeed
TWILIO_ACCOUNT_SID=ACxxxxxxxxxxxxxxxxxxxxxxxxxxxxx
TWILIO_AUTH_TOKEN=your_test_auth_token
TWILIO_PHONE_NUMBER=+15005550006

# Push Notifications (Optional)
EXPO_PUSH_TOKEN=

# ====================================================================
# SECURITY (Relaxed for development)
# ====================================================================

# CORS (Allow all origins in development)
CORS_ORIGINS=*
CORS_CREDENTIALS=true

# Rate Limiting (Disabled for development)
ENABLE_RATE_LIMITING=false
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=1000

# Security Headers
ENABLE_HELMET=false
COOKIE_SECURE=false
COOKIE_SAME_SITE=lax

# ====================================================================
# MONITORING (Optional for development)
# ====================================================================

# Error Tracking
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# Metrics
ENABLE_PROMETHEUS=false
PROMETHEUS_PORT=9090

# Alerts (Usually not needed for development)
SLACK_WEBHOOK_URL=
ENABLE_PAGERDUTY=false

# ====================================================================
# MOBILE APP CONFIGURATION
# ====================================================================

# For testing on physical device, use your machine's IP
# Find your IP: 
#   Mac/Linux: ifconfig | grep "inet " | grep -v 127.0.0.1
#   Windows: ipconfig
EXPO_PUBLIC_API_URL=http://localhost:3000
# EXPO_PUBLIC_API_URL=http://192.168.1.100:3000

# Copy Supabase credentials
EXPO_PUBLIC_SUPABASE_URL=${SUPABASE_URL}
EXPO_PUBLIC_SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}

# Development settings
EXPO_PUBLIC_ENV=development
EXPO_PUBLIC_ENABLE_DEBUG_MODE=true
EXPO_PUBLIC_SHOW_API_LOGS=true

# ====================================================================
# WEB DASHBOARD CONFIGURATION
# ====================================================================

# NextAuth (auto-generated secret)
NEXTAUTH_SECRET=dev_nextauth_secret_change_in_production
NEXTAUTH_URL=http://localhost:3001

# Copy core settings
NEXT_PUBLIC_SUPABASE_URL=${SUPABASE_URL}
NEXT_PUBLIC_SUPABASE_ANON_KEY=${SUPABASE_ANON_KEY}
NEXT_PUBLIC_API_URL=http://localhost:3000

# Development features
NEXT_PUBLIC_ENV=development
NEXT_PUBLIC_ENABLE_DEBUG_MODE=true

# ====================================================================
# LOCAL DEVELOPMENT URLS
# ====================================================================

# Service URLs
API_URL=http://localhost:3000
WEB_URL=http://localhost:3001
MOBILE_URL=http://localhost:19006

# Health check
HEALTH_CHECK_URL=http://localhost:3000
HEALTH_CHECK_TIMEOUT=5000

# ====================================================================
# FEATURE FLAGS
# ====================================================================

# All features enabled for development
ENABLE_WEBSOCKETS=true
ENABLE_CACHING=true
ENABLE_COMPRESSION=true
ENABLE_DETAILED_HEALTH=true

# ====================================================================
# QUICK COMMANDS
# ====================================================================
# 
# Start all services:
#   cd lamsa-api && npm run dev
#   cd lamsa-mobile && npm start
#   cd lamsa-web && npm run dev
#
# Validate setup:
#   node scripts/validate-env.js
#
# Generate secure secrets:
#   node scripts/validate-env.js generate-secrets
#
# Reset to defaults:
#   node scripts/setup-env.js dev

# ====================================================================
# TROUBLESHOOTING
# ====================================================================
#
# "Cannot connect to Supabase"
# - Check SUPABASE_URL starts with https://
# - Verify keys from Supabase dashboard > Settings > API
#
# "Mobile app can't reach API"
# - Use your machine's IP instead of localhost
# - Ensure firewall allows port 3000
#
# "Authentication failing"
# - Regenerate JWT_SECRET
# - Check JWT_EXPIRES_IN format (e.g., "7d", "24h")
#
# "Redis connection failed"
# - Install Redis: brew install redis (Mac)
# - Or comment out REDIS_URL to use in-memory cache